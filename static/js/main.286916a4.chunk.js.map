{"version":3,"sources":["components/common/ErrorBoundary/ErrorBoundary.tsx","components/common/Logo/Logo.tsx","components/common/Scaffold/Scaffold.tsx","utils/preventTouchBehaviour.ts","components/common/AutoSizer/ResizeEmitter.ts","components/common/AutoSizer/AutoSizer.tsx","pages/DrawningPage/layers/Capture/PermissionDenied.tsx","pages/DrawningPage/layers/Capture/CaptureContainer.tsx","pages/DrawningPage/layers/Capture/Capture.tsx","pages/DrawningPage/layers/Fade/Fade.tsx","pages/DrawningPage/layers/Drawning/DrawningContainer.tsx","pages/DrawningPage/layers/Drawning/Drawning.tsx","pages/DrawningPage/DrawningPage.tsx","components/common/Breadcrumbs/Breadcrumbs.tsx","pages/SettingsPage/Spacer.tsx","pages/SettingsPage/SettingsPage.tsx","pages/Router.tsx","config.ts","components/common/RouterContainer/RouterContainer.tsx","components/App.tsx","components/ErrorReporter.tsx","utils/enableLogging.ts","store/DrawningStore.ts","index.tsx"],"names":["ErrorBoundary","props","state","hasError","this","onError","ErrorPlaceholder","children","React","defaultProps","useStyles","makeStyles","root","display","alignItems","justifyContent","flexDirection","marginTop","minHeight","logo","fontSize","Logo","classes","className","IconButton","Typography","theme","zIndex","transition","noHeaderElevation","boxShadow","stretch","flexGrow","appBarCollapsed","background","palette","paper","color","getContrastText","appBar","offset","mixins","toolbar","hide","handleHelpClick","a","document","createElement","href","target","click","Scaffold","pages","style","drawningStore","useState","opened","setOpened","colorAnchorEl","setColorAnchorEl","sizeAnchorEl","setSizeAnchorEl","inFullscreen","setFullscreen","useEffect","interval","setInterval","current","fullscreenElement","clearInterval","navigate","useRouter","createMenuClickHandler","name","isReverse","isDrawningBlocked","brushColor","brushSize","handleColorMenuClose","handleSizeMenuClose","createHandleSizeMenuChoose","size","setBrushSize","createHandleColorMenuChoose","setBrushColor","classNames","isHeaderCollapsed","CssBaseline","Drawer","open","onClose","List","minWidth","map","index","icon","label","ListItem","button","onClick","ListItemIcon","ListItemText","primary","AppBar","position","Toolbar","exitFullscreen","documentElement","requestFullscreen","aria-controls","aria-haspopup","disabled","currentTarget","Menu","id","anchorEl","keepMounted","MenuItem","setIsForceClear","setIsReverse","Collapse","in","displayName","compose","inject","observer","eventMap","preventTouchBehaviour","el","touchHandler","event","first","changedTouches","touchType","type","simulatedEvent","createEvent","initMouseEvent","window","screenX","screenY","clientX","clientY","dispatchEvent","preventDefault","addEventListener","removeEventListener","ResizeEmitter","onDispose","subscribers","disposeTimeout","subscribe","fn","push","clearTimeout","unsubscribe","filter","subscriber","tryDispose","broadcast","forEach","setTimeout","length","unobserve","disconnect","ResizeObserver","observe","AutoSizer","defaultHeight","defaultWidth","onResize","disableHeight","disableWidth","heightRequest","v","widthRequest","delay","autoSizer","useRef","height","width","setState","useLayoutEffect","parentElement","element","handler","getBoundingClientRect","getComputedStyle","parseFloat","paddingLeft","paddingRight","paddingTop","paddingBottom","isOk","emitters","_emitters","has","get","delete","set","handlerD","debounce","outerStyle","childParams","ref","WeakMap","content","PermissionDenied","variant","elementRef","contextRef","permissionDenied","setPermissionDenied","reverse","setReverse","applyReverse","useCallback","ctx","translate","scale","animationFrame","canvas","navigator","mediaDevices","getUserMedia","video","facingMode","min","max","stream","setAttribute","toString","objectFit","srcObject","Promise","res","onloadedmetadata","play","getContext","loop","active","clearRect","drawImage","requestAnimationFrame","setIsDrawningBlocked","process","cancelAnimationFrame","dispose","autorun","top","left","right","bottom","Capture","body","container","fade","marginRight","fadeWidth","sizeMap","isForceClear","strokeWidth","strokeColor","Drawning","DrawningPage","setIsHeaderCollapsed","shrink","Breadcrumbs","onBack","onSave","currentTitle","backwardTitle","saveLabel","saveDisabled","otherProps","Box","aria-label","Link","Button","Spacer","fields","FieldType","Text","inputType","title","description","defaultValue","SettingsPage","undefined","data","setData","save","setSave","enqueueSnackbar","useSnackbar","setFadeWidth","e","console","error","invalidity","msg","change","newData","initialChange","spacify","str","replace","letter","createRoute","component","path","routes","FormatPaint","Settings","router","createRouter","start","INITIAL_ROUTE","INDEX_DICT","reduce","acm","k","Container","onAnimationEnd","Grid","item","xs","sm","md","lg","xl","moveLeft","animation","transitions","easing","easeInOut","moveRight","transform","opacity","RouterContainer","defaultPage","setMoveLeft","setMoveRight","route","useRoute","useMiddleware","toRoute","fromRoute","done","to","from","toIdx","fromIdx","params","Component","find","r","getComponent","App","ErrorReporter","p","createLogger","LOG_KEY","LOG_TOTAL","JSON","parse","localStorage","getItem","setItem","stringify","mutation","warn","mutations","slice","createSnapshot","Object","entries","toJS","filterCyclic","arr","obj","seenObjects","detect","indexOf","key","hasOwnProperty","isCyclic","enableLogging","self","total","logger","spy","ev","log","snapshot","args","arguments","STORAGE_KEY","STORAGE_FIELDS","stateManager","json","includes","object","DrawningStore","makeObservable","action","bound","observable","restoreChanges","flushChanges","getData","THEME_DARK","createMuiTheme","main","secondary","text","hint","default","ReactDOM","render","maxSnack","getElementById"],"mappings":"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","file":"static/js/main.286916a4.chunk.js","sourcesContent":["import * as React from \"react\";\n\ninterface IErrorBoundaryProps {\n  onError?: () => void;\n  ErrorPlaceholder?: React.ReactElement;\n}\n\ninterface IErrorBoundaryState {\n  hasError: boolean;\n}\n\nexport class ErrorBoundary extends React.Component<\n  IErrorBoundaryProps,\n  IErrorBoundaryState\n> {\n  static defaultProps = {\n    ErrorPlaceholder: null,\n  };\n\n  constructor(props: IErrorBoundaryProps) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError() {\n    return { hasError: true };\n  }\n\n  componentDidCatch() {\n    if (this.props.onError) {\n      this.props.onError();\n    }\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return this.props.ErrorPlaceholder;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import { makeStyles } from '@material-ui/core';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\n\nimport FormatPaint from '@material-ui/icons/FormatPaint';\n\nconst useStyles = makeStyles({\n    root: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        flexDirection: 'column',\n        marginTop: '5px',\n        minHeight: '125px',\n    },\n    logo: {\n        fontSize: '45px',\n    },\n});\n\nexport const Logo = () => {\n    const classes = useStyles();\n    return (\n        <div className={classes.root}>\n            <IconButton>\n                <FormatPaint\n                    className={classes.logo}\n                />\n            </IconButton>\n            <Typography>\n                DrawningBooth\n            </Typography>\n        </div>\n    );\n};\n\nexport default Logo;\n","import * as React from 'react';\nimport { useRouter } from 'react-router5';\nimport { useState, useEffect, createElement } from \"react\";\n\nimport classNames from 'classnames';\n\nimport AppBar from \"@material-ui/core/AppBar\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport Help from \"@material-ui/icons/Help\";\nimport Flip from \"@material-ui/icons/Flip\";\nimport Close from \"@material-ui/icons/Close\";\nimport Palette from \"@material-ui/icons/Palette\";\nimport LineWeight from \"@material-ui/icons/LineWeight\";\nimport Fullscreen from \"@material-ui/icons/Fullscreen\";\nimport FullscreenExit from \"@material-ui/icons/FullscreenExit\";\n\nimport { makeStyles } from '@material-ui/core';\n\nimport Logo from '../Logo';\n\nimport { inject, observer } from \"mobx-react\";\nimport compose from \"compose-function\";\n\nimport DrawningStore from '../../../store/DrawningStore';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        zIndex: 999,\n        '& header.MuiPaper-root': {\n            transition: `background 250ms`,\n        },\n    },\n    noHeaderElevation: {\n        '& header.MuiPaper-root': {\n            boxShadow: 'none',\n        },\n    },\n    stretch: {\n        flexGrow: 1,\n    },\n    appBarCollapsed: {\n        background: theme.palette.background.paper,\n        color: theme.palette.getContrastText(theme.palette.background.paper),\n    },\n    appBar: {\n        background: 'transparent',\n        color: 'white',\n    },\n    offset: theme.mixins.toolbar,\n    hide: {\n        display: 'none',\n    },\n}));\n\nconst handleHelpClick = () => {\n    const a = document.createElement('a');\n    a.href = 'https://www.behance.net/tripolskypetr';\n    a.target = '_blank';\n    a.click();\n};\n\ninterface IScaffoldProps {\n    children: React.ReactChild;\n    pages?: {\n        icon: React.ComponentType;\n        label: string;\n        name: string;\n    }[];\n    className?: string;\n    style?: React.CSSProperties;\n}\n\ninterface IScaffoldPrivate {\n    drawningStore: DrawningStore;\n}\n\nexport const Scaffold = ({\n    children,\n    pages = [],\n    className,\n    style,\n    drawningStore,\n}: IScaffoldProps & IScaffoldPrivate) => {\n\n    const [opened, setOpened] = useState(false);\n    const [colorAnchorEl, setColorAnchorEl] = useState<HTMLButtonElement | null>(null);\n    const [sizeAnchorEl, setSizeAnchorEl] = useState<HTMLButtonElement | null>(null);\n    const [inFullscreen, setFullscreen] = useState<boolean>(false);\n    const classes = useStyles();\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            const current = document.fullscreenElement !== null;\n            if (inFullscreen !== current) {\n                setFullscreen(current);\n            }\n        }, 1_000);\n        return () => clearInterval(interval);\n    }, [inFullscreen]);\n\n    const { navigate } = useRouter();\n\n    const handleMenuToggle = () => setOpened(!opened);\n\n    const createMenuClickHandler = (name: string) => () => {\n        setOpened(false);\n        navigate(name);\n    };\n\n    const { isReverse, isDrawningBlocked, brushColor, brushSize } = drawningStore;\n\n    const handleReverse = () => drawningStore.setIsReverse(!isReverse);\n\n    const handleClear = () => drawningStore.setIsForceClear(true);\n\n    const handleColorMenuClick = ({ currentTarget }: React.SyntheticEvent<HTMLButtonElement>) => {\n        setColorAnchorEl(currentTarget);\n    };\n\n    const handleFullscreen = () => {\n        if (inFullscreen) {\n            document.exitFullscreen();\n        } else {\n            document.documentElement.requestFullscreen();\n        }\n    };\n\n    const handleColorMenuClose = () => {\n        setColorAnchorEl(null);\n    };\n\n    const handleSizeMenuClick = ({ currentTarget }: React.SyntheticEvent<HTMLButtonElement>) => {\n        setSizeAnchorEl(currentTarget);\n    };\n    \n    const handleSizeMenuClose = () => {\n        setSizeAnchorEl(null);\n    };\n\n    const createHandleSizeMenuChoose = (size: string) => () => {\n        drawningStore.setBrushSize(size);\n        handleSizeMenuClose();\n    };\n\n    const createHandleColorMenuChoose = (color: string) => () => {\n        drawningStore.setBrushColor(color);\n        handleColorMenuClose();\n    };\n\n    return (\n        <div \n            className={classNames(classes.root, {\n                [classes.noHeaderElevation]: !drawningStore.isHeaderCollapsed,\n            }, className)}\n        >\n            <CssBaseline />\n            <Drawer\n                open={opened}\n                onClose={() => setOpened(false)}\n            >\n                <Logo/>\n                <List\n                    style={{ minWidth: \"240px\" }}\n                >\n                    {pages.map(({ icon, name, label }, index) => (\n                        <ListItem\n                            button\n                            key={index}\n                            onClick={createMenuClickHandler(name)}\n                        >\n                            <ListItemIcon>\n                                {createElement(icon)}\n                            </ListItemIcon>\n                            <ListItemText\n                                primary={label}\n                            />\n                        </ListItem>\n                    ))}\n                </List>\n            </Drawer>\n            <AppBar\n                className={classNames({\n                    [classes.appBarCollapsed]: drawningStore.isHeaderCollapsed,\n                    [classes.appBar]: !drawningStore.isHeaderCollapsed,\n                })}\n                position=\"fixed\"\n                style={style}\n            >\n                <Toolbar>\n                    <IconButton\n                        color=\"inherit\"\n                        onClick={handleMenuToggle}\n                    >\n                        <MenuIcon />\n                    </IconButton>\n                    <div className={classes.stretch} />\n                    <IconButton\n                        color=\"inherit\"\n                        onClick={handleFullscreen}\n                    >\n                        {inFullscreen ? <FullscreenExit /> : <Fullscreen />}\n                    </IconButton>\n                    <IconButton\n                        color=\"inherit\"\n                        aria-controls=\"color-menu\"\n                        aria-haspopup=\"true\"\n                        disabled={isDrawningBlocked}\n                        style={{color: brushColor || 'white'}}\n                        onClick={handleColorMenuClick}\n                    >\n                        <Palette />\n                    </IconButton>\n                    <Menu\n                        id=\"color-menu\"\n                        anchorEl={colorAnchorEl}\n                        keepMounted\n                        open={!!colorAnchorEl}\n                        onClose={handleColorMenuClose}\n                    >\n                        <MenuItem disabled={brushColor === 'red'} onClick={createHandleColorMenuChoose('red')}>Red</MenuItem>\n                        <MenuItem disabled={brushColor === 'green'} onClick={createHandleColorMenuChoose('green')}>Green</MenuItem>\n                        <MenuItem disabled={brushColor === 'blue'} onClick={createHandleColorMenuChoose('blue')}>Blue</MenuItem>\n                    </Menu>\n                    <IconButton\n                        color=\"inherit\"\n                        aria-controls=\"size-menu\"\n                        aria-haspopup=\"true\"\n                        disabled={isDrawningBlocked}\n                        onClick={handleSizeMenuClick}\n                    >\n                        <LineWeight />\n                    </IconButton>\n                    <Menu\n                        id=\"size-menu\"\n                        anchorEl={sizeAnchorEl}\n                        keepMounted\n                        open={!!sizeAnchorEl}\n                        onClose={handleSizeMenuClose}\n                    >\n                        <MenuItem disabled={brushSize === 'small'} onClick={createHandleSizeMenuChoose('small')}>Small</MenuItem>\n                        <MenuItem disabled={brushSize === 'medium'} onClick={createHandleSizeMenuChoose('medium')}>Medium</MenuItem>\n                        <MenuItem disabled={brushSize === 'high'} onClick={createHandleSizeMenuChoose('high')}>High</MenuItem>\n                    </Menu>\n                    <IconButton\n                        color=\"inherit\"\n                        disabled={isDrawningBlocked}\n                        onClick={handleClear}\n                    >\n                        <Close />\n                    </IconButton>\n                    <IconButton\n                        color=\"inherit\"\n                        disabled={isDrawningBlocked}\n                        onClick={handleReverse}\n                    >\n                        <Flip />\n                    </IconButton>\n                    <IconButton\n                        color=\"inherit\"\n                        onClick={handleHelpClick}\n                    >\n                        <Help />\n                    </IconButton>\n                </Toolbar>\n            </AppBar>\n            <Collapse in={drawningStore.isHeaderCollapsed}>\n                <div className={classes.offset} />\n            </Collapse>\n            <div>\n                {children}\n            </div>\n        </div>\n    );\n};\n\nScaffold.displayName = 'Scaffold';\n\nexport default compose(\n    inject(({ drawningStore }) => ({ drawningStore })),\n    observer,\n)(Scaffold) as React.ComponentType<IScaffoldProps>;\n","\nconst eventMap: Record<string, string> = {\n    \"touchstart\": \"mousedown\",\n    \"touchmove\": \"mousemove\",\n    \"touchend\": \"mouseup\",\n};\n\nexport const preventTouchBehaviour = (el: HTMLElement) => {\n    const touchHandler = (event: TouchEvent) => {\n        const touches = event.changedTouches;\n        const first = touches[0];\n        const { type: touchType } = event;\n        const type: string = eventMap[touchType];\n        const simulatedEvent = document.createEvent(\"MouseEvent\");\n        simulatedEvent.initMouseEvent(\n            type, true, true, window, 1, \n            first.screenX, first.screenY, \n            first.clientX, first.clientY, false, \n            false, false, false, 0/*left*/, null\n        );\n        first.target.dispatchEvent(simulatedEvent);\n        event.preventDefault();\n    }\n    el.addEventListener(\"touchstart\", touchHandler, true);\n    el.addEventListener(\"touchmove\", touchHandler, true);\n    el.addEventListener(\"touchend\", touchHandler, true);\n    el.addEventListener(\"touchcancel\", touchHandler, true);\n    return () => {\n        el.removeEventListener(\"touchstart\", touchHandler, true);\n        el.removeEventListener(\"touchmove\", touchHandler, true);\n        el.removeEventListener(\"touchend\", touchHandler, true);\n        el.removeEventListener(\"touchcancel\", touchHandler, true);\n    };\n};\n\nexport default preventTouchBehaviour;\n","type Callback = () => void;\n\nconst DISPOSE_CHECK_DELAY = 10_000;\n\nexport class ResizeEmitter {\n  private subscribers: Callback[] = [];\n  private observer: ResizeObserver;\n  private disposeTimeout: NodeJS.Timeout | null = null;\n\n  constructor(private target: HTMLElement, private onDispose: Callback) {\n    this.observer = new ResizeObserver(this.broadcast);\n    this.observer.observe(this.target);\n  }\n\n  subscribe = (fn: Callback) => {\n    this.subscribers.push(fn);\n    this.clearTimeout();\n  };\n\n  unsubscribe = (fn: Callback) => {\n    this.subscribers = this.subscribers.filter(\n      (subscriber) => subscriber !== fn\n    );\n    this.clearTimeout();\n    this.tryDispose();\n  };\n\n  broadcast = () => {\n    this.subscribers.forEach((subscriber) => subscriber());\n  };\n\n  clearTimeout = () => {\n    if (this.disposeTimeout !== null) {\n      clearTimeout(this.disposeTimeout);\n    }\n  };\n\n  tryDispose = () => {\n    this.disposeTimeout = setTimeout(() => {\n      if (this.subscribers.length === 0) {\n        this.observer.unobserve(this.target);\n        this.observer.disconnect();\n        this.onDispose();\n      }\n    }, DISPOSE_CHECK_DELAY);\n  };\n}\n\nexport default ResizeEmitter;\n","import * as React from \"react\";\nimport { useState, useLayoutEffect, useRef } from \"react\";\nimport { debounce } from \"@material-ui/core\";\n\nimport ResizeEmitter from \"./ResizeEmitter\";\n\ninterface ISize {\n  height: number;\n  width: number;\n}\n\ninterface IAutoSizerProps {\n  children: (s: ISize) => any;\n  className?: string;\n  defaultHeight?: number;\n  defaultWidth?: number;\n  disableHeight?: boolean;\n  disableWidth?: boolean;\n  nonce?: string;\n  onResize?: (s: ISize) => void;\n  heightRequest?: (height: number) => number;\n  widthRequest?: (width: number) => number;\n  style?: React.CSSProperties;\n  target?: HTMLElement;\n  delay?: number;\n}\n\nexport const AutoSizer = ({\n  defaultHeight = 0,\n  defaultWidth = 0,\n  onResize = () => null,\n  disableHeight = false,\n  disableWidth = false,\n  heightRequest = (v) => v,\n  widthRequest = (v) => v,\n  style = {},\n  className,\n  children,\n  target,\n  delay = 100,\n}: IAutoSizerProps) => {\n  const autoSizer = useRef<HTMLDivElement>(null as never);\n\n  const [state, setState] = useState<ISize>({\n    height: defaultHeight,\n    width: defaultWidth,\n  });\n\n  useLayoutEffect(() => {\n    const { current } = autoSizer;\n    const { parentElement } = current;\n\n    const element = target || parentElement!;\n\n    const handler = () => {\n      let { height, width } = element.getBoundingClientRect();\n      const style = getComputedStyle(element);\n\n      width -= parseFloat(style.paddingLeft);\n      width -= parseFloat(style.paddingRight);\n\n      height -= parseFloat(style.paddingTop);\n      height -= parseFloat(style.paddingBottom);\n\n      height = heightRequest(height);\n      width = widthRequest(width);\n\n      let isOk = state.height !== height;\n      isOk = isOk || state.width !== width;\n\n      if (isOk) {\n        setState({ height, width });\n        onResize({ height, width });\n      }\n    };\n\n    const { _emitters: emitters } = AutoSizer;\n    let observer: ResizeEmitter;\n\n    if (emitters.has(element)) {\n      observer = emitters.get(element)!;\n    } else {\n      observer = new ResizeEmitter(element, () => {\n        emitters.delete(element);\n      });\n      emitters.set(element, observer);\n    }\n\n    const handlerD = debounce(handler, delay);\n    observer.subscribe(handlerD);\n    handler();\n\n    return () => {\n      observer.unsubscribe(handlerD);\n    };\n  }, [\n    disableHeight,\n    disableWidth,\n    heightRequest,\n    widthRequest,\n    state,\n    delay,\n    onResize,\n  ]);\n\n  const { height, width } = state;\n\n  const outerStyle: React.CSSProperties = {\n    height,\n    width,\n  };\n\n  const childParams: ISize = { height, width };\n\n  if (disableHeight) {\n    delete outerStyle.height;\n  }\n\n  if (disableWidth) {\n    delete outerStyle.width;\n  }\n\n  return (\n    <div\n      className={className}\n      ref={autoSizer}\n      style={{\n        ...outerStyle,\n        ...style,\n      }}\n    >\n      {children(childParams)}\n    </div>\n  );\n};\n\nAutoSizer._emitters = new WeakMap<HTMLElement, ResizeEmitter>();\n\nexport default AutoSizer;\n","import * as React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nimport Typography from '@material-ui/core/Typography';\n\ninterface IPermissionDeniedProps {\n    height: number;\n    width: number;\n}\n\nconst useStyles = makeStyles({\n    root: {\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    content: {\n        marginTop: '-15vh',\n    },\n});\n\nexport const PermissionDenied = ({\n    height,\n    width,\n}: IPermissionDeniedProps) => {\n    const classes = useStyles();\n    return (\n        <div\n            className={classes.root}\n            style={{ height, width }}\n        >\n            <div className={classes.content}>\n                <Typography variant=\"h4\">Camera permission denied</Typography>\n                <Typography variant=\"body1\">You have blocked camera access. To go drawing, please update your browser settings to allow access</Typography>\n            </div>\n        </div>\n    );\n}\n\nexport default PermissionDenied;\n","import * as React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nimport { useRef, useState, useEffect, useLayoutEffect, useCallback } from 'react';\n\nimport PermissionDenied from './PermissionDenied';\n\nimport { inject, observer } from \"mobx-react\";\nimport { autorun } from 'mobx';\nimport compose from \"compose-function\";\n\nimport DrawningStore from '../../../../store/DrawningStore';\n\ninterface ICaptureContainerProps {\n    height: number;\n    width: number;\n}\n\ninterface ICaptureContainerPrivate {\n    drawningStore: DrawningStore;\n}\n\nconst useStyles = makeStyles({\n    root: {},\n});\n\nexport const CaptureContainer = ({\n    height,\n    width,\n    drawningStore,\n}: ICaptureContainerProps & ICaptureContainerPrivate) => {\n    const elementRef = useRef<HTMLCanvasElement>(null);\n    const contextRef: React.MutableRefObject<CanvasRenderingContext2D> = useRef<CanvasRenderingContext2D>(null as never);\n    const [permissionDenied, setPermissionDenied] = useState(false);\n    const [reverse, setReverse] = useState(drawningStore.isReverse);\n    const classes = useStyles();\n\n    const applyReverse = useCallback(() => {\n        const { current: ctx } = contextRef;\n        if (ctx) {\n            ctx.translate(width, 0);\n            ctx.scale(-1, 1);\n        }\n    }, [width]);\n\n    useEffect(() => {\n\n        let animationFrame: number | null = null;\n\n        const process = async () => {\n            const { current: canvas } = elementRef;\n            if (canvas) {\n                try {\n                    const stream = await navigator.mediaDevices.getUserMedia({ video: { \n                        facingMode: 'user',\n                        width: { min: 0, max: width },\n                        height: { min: 0, max: height },\n                    }});\n\n                    const video = document.createElement('video');\n                    video.setAttribute('height', height.toString());\n                    video.setAttribute('width', width.toString());\n                    video.setAttribute('playsinline', '');\n                    video.style.objectFit = 'cover';\n\n                    video.srcObject = stream;\n\n                    await new Promise<void>((res) => {\n                        video.onloadedmetadata = () => {\n                          video.play()\n                          res();\n                        }\n                    });\n\n                    const ctx = canvas.getContext('2d')!;\n                    contextRef.current = ctx;\n\n                    if (reverse && width !== 0 && height !== 0) {\n                        ctx.translate(width, 0);\n                        ctx.scale(-1, 1);\n                    }\n\n                    const loop = () => {\n                        if (stream.active) {\n                            ctx.clearRect(0, 0, width, height);\n                            ctx.drawImage(video, 0, 0, width, height);\n                            animationFrame = requestAnimationFrame(loop);\n                        }\n                    }\n                    \n                    loop();\n\n                } catch (e) {\n                    if (e.name === 'NotAllowedError') {\n                        drawningStore.setIsDrawningBlocked(true);\n                        setPermissionDenied(true);\n                    } else {\n                        throw e;\n                    }\n                }\n            }\n        };\n        process();\n        return () => {\n            if (animationFrame !== null) {\n                cancelAnimationFrame(animationFrame);\n            }\n        }\n    }, [height, width]);\n\n    useLayoutEffect(() => {\n        const dispose = autorun(() => {\n            if (drawningStore.isReverse !== reverse) {\n                setReverse(drawningStore.isReverse);\n                applyReverse();\n            }\n        });\n        return () => dispose();\n    }, [applyReverse, reverse]);\n\n    return !permissionDenied ? (\n        <canvas\n            className={classes.root}\n            ref={elementRef}\n            height={height}\n            width={width}\n        />\n    ) : (\n        <PermissionDenied\n            height={height}\n            width={width}\n        />\n    );\n};\n\nexport default compose(\n    inject(({ drawningStore }) => ({ drawningStore })),\n    observer,\n)(CaptureContainer) as React.ComponentType<ICaptureContainerProps>;\n","import * as React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nimport AutoSizer from '../../../../components/common/AutoSizer';\n\nimport CaptureContainer from './CaptureContainer';\n\nconst useStyles = makeStyles({\n    root: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    },\n});\n\nexport const Capture = () => {\n    const classes = useStyles();\n    return (\n        <AutoSizer className={classes.root} target={document.body}>\n            {({\n                height,\n                width,\n            }) => (\n                <CaptureContainer\n                    height={height}\n                    width={width}\n                />\n            )}\n        </AutoSizer>\n    );\n};\n\nexport default Capture;\n","import * as React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nimport AutoSizer from '../../../../components/common/AutoSizer';\n\nimport { inject, observer } from \"mobx-react\";\nimport compose from \"compose-function\";\n\nimport DrawningStore from '../../../../store/DrawningStore';\n\nconst useStyles = makeStyles({\n    root: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    },\n    container: {\n        display: 'flex',\n        flexDirection: 'row-reverse',\n    },\n    fade: {\n        background: `linear-gradient(\n            to right,\n            #0000,\n            #000\n        )`,\n        marginRight: -5,\n    },\n});\n\ninterface IFadeProps {\n}\n\ninterface IFadePrivate {\n    drawningStore: DrawningStore\n}\n\nexport const Fade = ({\n    drawningStore,\n}: IFadeProps & IFadePrivate) => {\n    const classes = useStyles();\n\n    const { fadeWidth, isDrawningBlocked } = drawningStore;\n\n    return (\n        <AutoSizer className={classes.root} target={document.body}>\n            {({\n                height,\n                width,\n            }) => (\n                <div \n                    className={classes.container}\n                    style={{ height, width }}\n                >\n                    {!isDrawningBlocked && (\n                        <div\n                            className={classes.fade}\n                            style={{ height, width: `${fadeWidth}px` }}\n                        />\n                    )}\n                </div>\n            )}\n        </AutoSizer>\n    );\n};\n\nexport default compose(\n    inject(({ drawningStore }) => ({ drawningStore })),\n    observer,\n)(Fade) as React.ComponentType<IFadeProps>;\n","import * as React from 'react';\nimport { useLayoutEffect } from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nimport { ReactSketchCanvas } from \"react-sketch-canvas\";\n\nimport { inject, observer } from \"mobx-react\";\nimport { autorun } from \"mobx\";\nimport compose from \"compose-function\";\n\nimport DrawningStore from '../../../../store/DrawningStore';\n\nconst useStyles = makeStyles({\n    root: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    },\n    canvas: {\n    },\n});\n\ninterface IDrawningContainerProps {\n    height: number;\n    width: number;\n}\n\ninterface IDrawningContainerPrivate {\n    drawningStore: DrawningStore\n}\n\nconst sizeMap: Record<string, number> = {\n    'small': 2,\n    'medium': 3,\n    'high': 4,\n};\n\nexport const DrawningContainer = ({\n    height,\n    width,\n    drawningStore,\n}: IDrawningContainerProps & IDrawningContainerPrivate) => {\n    const classes = useStyles();\n\n    const { brushColor, brushSize, isForceClear } = drawningStore;\n\n    useLayoutEffect(() => {\n        const dispose = autorun(() => {\n            if (drawningStore.isForceClear) {\n                setTimeout(() => drawningStore.setIsForceClear(false));\n            }\n        });\n        return () => dispose();\n    }, []);\n\n    if (isForceClear) {\n        return null;\n    } else {\n        return (\n            <ReactSketchCanvas\n                className={classes.canvas}\n                style={{height, width}}\n                width={`${width}px`}\n                height={`${height}px`}\n                strokeWidth={sizeMap[brushSize] || 2}\n                strokeColor={brushColor}\n                background=\"transparent\"\n            />\n        );\n    }\n};\n\nexport default compose(\n    inject(({ drawningStore }) => ({ drawningStore })),\n    observer,\n)(DrawningContainer) as React.ComponentType<IDrawningContainerProps>;\n","import * as React from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nimport AutoSizer from '../../../../components/common/AutoSizer';\n\nimport DrawningContainer from './DrawningContainer';\n\nconst useStyles = makeStyles({\n    root: {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n    },\n});\n\nexport const Drawning = () => {\n    const classes = useStyles();\n    return (\n        <AutoSizer className={classes.root} target={document.body}>\n            {({\n                height,\n                width,\n            }) => (\n                <DrawningContainer\n                    height={height}\n                    width={width}\n                />\n            )}\n        </AutoSizer>\n    );\n}\n\nexport default Drawning;\n","import * as React from 'react';\nimport { useEffect, useRef } from 'react';\nimport { makeStyles } from '@material-ui/core';\n\nimport preventTouchBehaviour from '../../utils/preventTouchBehaviour';\n\nimport { inject, observer } from \"mobx-react\";\nimport compose from \"compose-function\";\n\nimport DrawningStore from '../../store/DrawningStore';\n\nimport Capture from './layers/Capture';\nimport Fade from './layers/Fade';\nimport Drawning from './layers/Drawning';\n\ninterface IDrawningPageProps {\n    drawningStore: DrawningStore;\n}\n\nconst useStyles = makeStyles({\n    root: {\n        position: 'relative',\n    },\n});\n\nexport const DrawningPage = ({\n    drawningStore,\n}: IDrawningPageProps) => {\n    const classes = useStyles();\n    const elementRef = useRef<HTMLDivElement>(null);\n\n    useEffect(() => {\n        drawningStore.setIsHeaderCollapsed(false);\n        return () => {\n            drawningStore.dispose();\n        };\n    }, []);\n\n    useEffect(() => {\n        const { current: element } = elementRef;\n        if (element) {\n            const dispose = preventTouchBehaviour(element);\n            return () => dispose();\n        }\n    }, []);\n\n    return (\n        <div ref={elementRef} className={classes.root}>\n            <Capture />\n            <Fade />\n            <Drawning />\n        </div>\n    )\n};\n\nDrawningPage.displayName = \"DrawningPage\";\n\nexport default compose(\n    inject(({ drawningStore }) => ({ drawningStore })),\n    observer,\n)(DrawningPage);\n","import * as React from 'react';\n\nimport classNames from 'classnames';\n\nimport MatBreadcrumbs from '@material-ui/core/Breadcrumbs';\nimport Box from '@material-ui/core/Box';\nimport Button from '@material-ui/core/Button';\nimport Link from '@material-ui/core/Link';\nimport Typography from '@material-ui/core/Typography';\n\nimport { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n    root: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'stretch',\n      flexDirection: 'row',\n      paddingTop: '10px',\n      paddingBottom: '10px',\n    },\n    stretch: {\n      flexGrow: 1,\n      shrink: 1,\n    },\n});\n\ninterface IBreadcrumbsProps {\n    onBack?: () => void;\n    onSave?: () => void;\n    currentTitle?: string;\n    backwardTitle?: string;\n    saveLabel?: string;\n    saveDisabled?: boolean;\n    className?: string;\n    style?: React.CSSProperties;\n}\n\nexport const Breadcrumbs = ({\n    onBack,\n    onSave,\n    currentTitle = 'Card',\n    backwardTitle = 'List',\n    saveLabel = 'Save',\n    saveDisabled = true,\n    className = '',\n    ...otherProps\n}: IBreadcrumbsProps) => {\n    const classes = useStyles();\n    return (\n        <Box\n            className={classNames(classes.root, className)}\n            {...otherProps}\n        >\n            <MatBreadcrumbs\n                className={classes.stretch}\n                aria-label=\"breadcrumb\"\n            >\n                <Link\n                    color=\"inherit\"\n                    onClick={onBack}\n                >\n                    {backwardTitle}\n                </Link>\n                <Typography color=\"textPrimary\">\n                    {currentTitle}\n                </Typography>\n            </MatBreadcrumbs>\n            <Button\n                disabled={saveDisabled}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={onSave}\n            >\n                {saveLabel}\n            </Button>\n        </Box>\n    );\n};\n\nBreadcrumbs.displayName = 'Breadcrumbs';\n\nexport default Breadcrumbs;\n","import { makeStyles } from '@material-ui/core';\n\nconst useStyles = makeStyles({\n    root: {\n        paddingTop: '20vh',\n    },\n});\n\nexport const Spacer = () => {\n    const classes = useStyles();\n    return (\n        <div className={classes.root} />\n    );\n};\n\nexport default Spacer;\n","import * as React from 'react';\nimport { useState, useEffect } from 'react';\n\nimport { useSnackbar } from 'notistack';\n\nimport {\n    OneTyped,\n    TypedField,\n    FieldType,\n} from '@tripolskypetr/react-view-builder';\n\nimport Container from '@material-ui/core/Container';\n\nimport Breadcrumbs from '../../components/common/Breadcrumbs';\nimport Spacer from './Spacer';\n\nimport { inject, observer } from \"mobx-react\";\nimport compose from \"compose-function\";\n\nimport DrawningStore from '../../store/DrawningStore';\n\nconst fields: TypedField[] = [\n    {\n        type: FieldType.Text,\n        inputType: 'number',\n        name: 'fadeWidth',\n        title: 'Fade width',\n        description: 'Right fade width',\n        defaultValue: '200',\n    },\n];\n\ninterface IData {\n    fadeWidth: string;\n}\n\ninterface ISettingsPageProps {\n    drawningStore: DrawningStore;\n}\n\nexport const SettingsPage = ({\n    drawningStore,\n}: ISettingsPageProps) => {\n\n    const [data, setData] = useState<IData>(undefined as never);\n    const [save, setSave] = useState(true);\n\n    const { enqueueSnackbar } = useSnackbar();\n\n    useEffect(() => {\n        drawningStore.setIsHeaderCollapsed(true);\n        return () => {\n            drawningStore.dispose();\n        };\n    }, []);\n\n    const handleSave = () => {\n        try {\n            const {\n                fadeWidth,\n            } = data;\n            drawningStore.setFadeWidth(fadeWidth);\n            enqueueSnackbar('Saved');\n            setSave(false);\n        } catch(e) {\n            enqueueSnackbar('Config save failed');\n            console.error(e)\n        }\n    };\n\n    const handleChange = (newData: IData, initialChange: boolean) => {\n        setData(newData);\n        setSave(!initialChange);\n    };\n\n    const handleInvalid = (msg: string) => {\n        enqueueSnackbar(msg);\n        setSave(false);\n    };\n\n    return (\n        <Container>\n            <Breadcrumbs\n                backwardTitle=\"DrawningBooth\"\n                currentTitle=\"SettingsPage\"\n                onSave={handleSave}\n                saveDisabled={!save}\n            />\n            <OneTyped<IData>\n                fields={fields}\n                invalidity={handleInvalid}\n                change={handleChange}\n                handler={data}\n            />\n            <Spacer />\n        </Container>\n    );\n};\n\nSettingsPage.displayName = \"SettingsPage\";\n\nexport default compose(\n    inject(({ drawningStore }) => ({ drawningStore })),\n    observer,\n)(SettingsPage);\n","import * as React from 'react';\n\nimport createRouter from 'router5';\n\nimport FormatPaint from '@material-ui/icons/FormatPaint';\nimport Settings from '@material-ui/icons/Settings';\n\nimport DrawningPage from './DrawningPage';\nimport SettingsPage from './SettingsPage';\n\nconst spacify = (str: string) =>\n  str.replace(/[A-Z]/g, (letter) => ` ${letter}`);\n\nconst createRoute = (\n  component: React.ComponentType,\n  icon: React.ComponentType,\n  name = component.displayName || 'UnknownPage',\n) => {\n  const label = spacify(name);\n  const path = `/${name}`;\n  return {\n    name,\n    path,\n    label,\n    icon,\n    component,\n  };\n};\n\nexport const routes = [\n  createRoute(DrawningPage, FormatPaint, 'DrawningPage'),\n  createRoute(SettingsPage, Settings, 'SettingsPage'),\n];\n\nexport const router = createRouter(routes);\n\nrouter.start();\n\n","export const INITIAL_ROUTE = 'DrawningPage';\n","import * as React from \"react\";\nimport { useEffect, useState } from \"react\";\nimport { makeStyles } from \"@material-ui/core\";\nimport { useRoute, useRouter } from \"react-router5\";\nimport { routes } from \"../../../pages/Router\";\nimport { Grid } from \"@material-ui/core\";\nimport classNames from \"classnames\";\n\nimport { INITIAL_ROUTE } from \"../../../config\";\n\nconst getComponent = (name: string) => {\n  const { component } = routes.find((r) => r.name === name)!;\n  return component;\n};\n\nconst INDEX_DICT = routes\n  .map(({ name }, index) => [name, index])\n  .reduce<any>((acm, [k, v]) => ({ ...acm, [k]: v }), {});\n\ninterface IContainerProps {\n  children: React.ReactChild;\n  style?: React.CSSProperties;\n  onAnimationEnd?: () => void;\n  className?: string;\n}\n\nconst Container = ({\n  onAnimationEnd,\n  children,\n  className,\n  style,\n}: IContainerProps) => (\n  <Grid\n    onAnimationEnd={onAnimationEnd}\n    className={className}\n    style={style}\n    item\n    xs\n    sm\n    md\n    lg\n    xl\n  >\n    <Grid container>{children}</Grid>\n  </Grid>\n);\n\nconst useStyles = makeStyles((theme) => ({\n  moveLeft: {\n    animation: `$moveLeftEnter 500ms ${theme.transitions.easing.easeInOut}`,\n  },\n  moveRight: {\n    animation: `$moveRightEnter 500ms ${theme.transitions.easing.easeInOut}`,\n  },\n  \"@keyframes moveLeftEnter\": {\n    \"0%\": {\n      transform: \"translateX(-200%)\",\n      opacity: 0,\n    },\n    \"100%\": {\n      transform: \"translateX(0)\",\n      opacity: 1,\n    },\n  },\n  \"@keyframes moveRightEnter\": {\n    \"0%\": {\n      transform: \"translateX(200%)\",\n      opacity: 0,\n    },\n    \"100%\": {\n      transform: \"translateX(0)\",\n      opacity: 1,\n    },\n  },\n}));\n\ninterface IRouterContainerProps {\n  defaultPage?: string;\n}\n\nexport const RouterContainer = ({\n  defaultPage,\n}: IRouterContainerProps) => {\n  const [moveLeft, setMoveLeft] = useState(false);\n  const [moveRight, setMoveRight] = useState(false);\n  const { route } = useRoute();\n  const router = useRouter();\n  const classes = useStyles();\n\n  useEffect(() => {\n    const unsubscribe = router.useMiddleware(\n      () => (toRoute, fromRoute, done) => {\n        const { name: to = INITIAL_ROUTE } = toRoute || {};\n        const { name: from = INITIAL_ROUTE } = fromRoute || {};\n        const toIdx = INDEX_DICT[to];\n        const fromIdx = INDEX_DICT[from];\n        if (fromIdx === toIdx) {\n          // void(0);\n        } else if (fromIdx > toIdx) {\n          setMoveLeft(true);\n        } else {\n          setMoveRight(true);\n        }\n        done();\n      }\n    );\n    return () => unsubscribe();\n  }, []);\n\n  const handleAnimationEnd = () => {\n    setMoveLeft(false);\n    setMoveRight(false);\n  };\n\n  const { name = defaultPage, params = {} } = route || {};\n  const Component = getComponent(name!);\n  return (\n    <Container\n      className={classNames({\n        [classes.moveLeft]: moveLeft,\n        [classes.moveRight]: moveRight,\n      })}\n      onAnimationEnd={handleAnimationEnd}\n    >\n      <Component {...params} />\n    </Container>\n  );\n};\n\nexport default RouterContainer;\n","import React from 'react';\n\nimport { RouterProvider } from \"react-router5\";\n\nimport Scaffold from \"./common/Scaffold\";\n\nimport { router, routes } from \"../pages/Router\";\n\nimport RouterContainer from './common/RouterContainer';\n\nimport { INITIAL_ROUTE } from '../config';\n\nfunction App() {\n  return (\n    <RouterProvider router={router}>\n      <Scaffold pages={routes}>\n        <RouterContainer defaultPage={INITIAL_ROUTE} />\n      </Scaffold>\n    </RouterProvider>\n  );\n}\n\nexport default App;\n","import * as React from \"react\";\n\nimport Box from \"@material-ui/core/Box\";\nimport Typography from \"@material-ui/core/Typography\";\n\nexport const ErrorReporter = () => (\n  <Box p={1}>\n    <Typography variant=\"h4\">It looks like app was crashed :-(</Typography>\n  </Box>\n);\n\nexport default ErrorReporter;\n","/* eslint-disable no-empty-pattern */\nimport { spy, toJS } from \"mobx\";\n\n// eslint:disable-next-line: new-parens\nconst createLogger = (LOG_KEY: string, LOG_TOTAL: number) =>\n  new (class {\n    private get mutations() {\n      return JSON.parse(localStorage.getItem(LOG_KEY) || \"[]\");\n    }\n    private set mutations(v) {\n      localStorage.setItem(LOG_KEY, JSON.stringify(v));\n    }\n    stringify(mutation: any) {\n      try {\n        return JSON.stringify(mutation);\n      } catch (e) {\n        console.warn(e);\n        return \"\";\n      }\n    }\n    log(mutation: any) {\n      this.mutations = [\n        this.stringify(mutation),\n        ...this.mutations.slice(0, LOG_TOTAL - 1),\n      ];\n    }\n  })();\n\nconst isCyclic = (obj: any) => {\n  const seenObjects: any[] = [];\n  const detect = (obj: any) => {\n    if (obj && typeof obj === \"object\") {\n      if (seenObjects.indexOf(obj) !== -1) {\n        return true;\n      }\n      seenObjects.push(obj);\n      for (const key in obj) {\n        if (obj.hasOwnProperty(key) && detect(obj[key])) {\n          return true;\n        }\n      }\n    }\n    return false;\n  };\n  return detect(obj);\n};\n\nconst createSnapshot = (ref: any) =>\n  Object.entries(toJS(ref))\n    .filter(([{}, v]) => typeof v !== \"function\")\n    .reduce((acm, [k, v]) => ({ ...acm, [k]: v }), {});\n\nconst filterCyclic = (arr: any[]) => arr.filter((v) => !isCyclic(v));\n\nexport const enableLogging = (self: any, key = \"unset-log-key\", total = 25) => {\n  const logger = createLogger(key, total);\n  spy((ev: any) => {\n    if (ev.type === \"action\") {\n      logger.log({\n        snapshot: createSnapshot(self),\n        args: filterCyclic(ev.arguments),\n        name: ev.name,\n      });\n    }\n  });\n};\n\nexport default enableLogging;\n","import { makeObservable } from \"mobx\";\nimport { action, observable } from \"mobx\";\n\nimport enableLogging from \"../utils/enableLogging\";\n\nconst STORAGE_KEY = \"BOOTH_LAST_STATE\";\n\nconst STORAGE_FIELDS: string[] = [\n    \"fadeWidth\",\n    \"isReverse\",\n    \"brushSize\",\n    \"brushColor\",\n];\n\nconst LOG_KEY = \"BOOTH_DRAWNING\";\nconst LOG_TOTAL = 50;\n\nconst stateManager = new (class {\n    getData() {\n        try {\n            const json = localStorage.getItem(STORAGE_KEY) || \"{}\";\n            const data = JSON.parse(json);\n            const entries = Object.entries(data).filter(([key]) => STORAGE_FIELDS.includes(key));\n            const object = entries.reduce((acm, [k, v]) => ({ ...acm, [k]: v }), {});\n            return object;\n        } catch {\n            console.log('stateManager broken data');\n            return {};\n        }\n    }\n    setData(data: Record<string, any>) {\n        const entries = Object.entries(data).filter(([key]) => STORAGE_FIELDS.includes(key));\n        const object = entries.reduce((acm, [k, v]) => ({ ...acm, [k]: v }), {});\n        const json = JSON.stringify(object, null, 2);\n        localStorage.setItem(STORAGE_KEY, json);\n    }\n})();\n\nclass StateManagerWrapper {\n    protected restoreChanges() {\n        Object.entries(stateManager.getData())\n            .forEach(([k, v]) => (this as any)[k] = v);\n    }\n    protected flushChanges() {\n        stateManager.setData(this);\n    }\n}\n\nexport class DrawningStore extends StateManagerWrapper {\n\n    /** \n     * Настройки. Сохраняются в localStorage\n     * и не сбрасываются при переключении между\n     * страницами\n     */\n    public fadeWidth = '650';\n    public isReverse = false;\n    public brushSize = 'small';\n    public brushColor = 'green';\n\n    /**\n     * Параметры. Динамично меняются при переходе\n     * между страницами и сбрасываются в dispose\n     */\n    public isHeaderCollapsed = false;\n    public isDrawningBlocked = false;\n    public isForceClear = false;\n\n    constructor() {\n        super();\n        makeObservable(this, {\n            setFadeWidth: action.bound,\n            setIsDrawningBlocked: action.bound,\n            setIsHeaderCollapsed: action.bound,\n            setIsForceClear: action.bound,\n            setBrushSize: action.bound,\n            setBrushColor: action.bound,\n            setIsReverse: action.bound,\n            dispose: action.bound,\n            isHeaderCollapsed: observable,\n            isDrawningBlocked: observable,\n            isReverse: observable,\n            isForceClear: observable,\n            brushSize: observable,\n            brushColor: observable,\n            fadeWidth: observable,\n        });\n        enableLogging(this, LOG_KEY, LOG_TOTAL);\n        this.restoreChanges();\n        window.addEventListener(\"beforeunload\", () => {\n            this.flushChanges();\n        }, false);\n    }\n\n    setBrushSize(brushSize: string) {\n        this.brushSize = brushSize;\n    }\n\n    setBrushColor(brushColor: string) {\n        this.brushColor = brushColor;\n    }\n\n    setIsHeaderCollapsed(isHeaderCollapsed: boolean) {\n        this.isHeaderCollapsed = isHeaderCollapsed;\n    }\n\n    setIsDrawningBlocked(isDrawningBlocked: boolean) {\n        this.isDrawningBlocked = isDrawningBlocked;\n    }\n\n    setIsReverse(isReverse: boolean) {\n        this.isReverse = isReverse;\n    }\n\n    setIsForceClear(isForceClear: boolean) {\n        this.isForceClear = isForceClear;\n    }\n\n    setFadeWidth(fadeWidth: string) {\n        this.fadeWidth = fadeWidth;\n    }\n\n    dispose() {\n        this.isHeaderCollapsed = false;\n        this.isDrawningBlocked = false;\n        this.flushChanges();\n    }\n}\n\nexport default DrawningStore;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { createMuiTheme, MuiThemeProvider } from \"@material-ui/core\";\nimport { SnackbarProvider } from \"notistack\";\nimport { Provider } from \"mobx-react\";\n\nimport ErrorBoundary from './components/common/ErrorBoundary';\n\nimport App from './components/App';\nimport ErrorReporter from './components/ErrorReporter';\n\nimport DrawningStore from './store/DrawningStore';\n\nconst THEME_DARK = createMuiTheme({\n  palette: {\n      type: 'dark',\n      primary: {\n          main: '#f48fb1',\n      },\n      secondary: {\n          main: '#90cbf9',\n      },\n      text: {\n          primary: \"#fff\",\n          secondary: \"rgba(255, 255, 255, 0.7)\",\n          disabled: \"rgba(255, 255, 255, 0.5)\",\n          hint: \"rgba(255, 255, 255, 0.5)\",\n      },\n      background: {\n          paper: \"#424242\",\n          default: \"#212121\",\n      },\n  },\n});\n\nconst MAX_SNACK = 15;\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst THEME_LIGHT = createMuiTheme({\n  palette: {\n    type: \"light\",\n    primary: {\n      main: \"#1976d2\",\n    },\n    secondary: {\n      main: \"#1976d2\",\n    },\n    text: {\n      primary: \"rgba(0, 0, 0, 0.87)\",\n      secondary: \"rgba(0, 0, 0, 0.54)\",\n      disabled: \"rgba(0, 0, 0, 0.38)\",\n      hint: \"rgba(0, 0, 0, 0.38)\",\n    },\n    background: {\n      default: \"#fff\",\n      paper: \"#f5f5f5\",\n    },\n  },\n});\n\nconst drawningStore = new DrawningStore();\n\nReactDOM.render(\n  <ErrorBoundary ErrorPlaceholder={<ErrorReporter />}>\n    <MuiThemeProvider theme={THEME_DARK}>\n      <SnackbarProvider maxSnack={MAX_SNACK}>\n        <Provider {...{ drawningStore }}>\n          <App />\n        </Provider>\n      </SnackbarProvider>\n    </MuiThemeProvider>\n  </ErrorBoundary>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}